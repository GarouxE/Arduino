#include<SoftwareSerial.h>
#define RX 8
#define TX 9
#define boutonR 3
#define broche 2
#define in1 10
#define in2 5
#define enb 4
#define capteur1 12
#define capteur2 13
SoftwareSerial BlueT(RX,TX);


int PWM=128;
char DATA;

void setup() {
  
  Serial.begin(9600);
  Serial.println("Bonjour -Pret pour les commandes AT");
  BlueT.begin(9600);

  pinMode(boutonR,INPUT);
  pinMode(broche,OUTPUT);

  pinMode(enb,OUTPUT);
  pinMode(in1,OUTPUT);
  pinMode(in2,OUTPUT);

 
  delay(500);
  }




void loop() {

  if (BlueT.available()){
    DATA=BlueT.read();
    if (DATA=='Y' ){
      digitalWrite(in2,LOW);
      digitalWrite(in1,HIGH);
      if((digitalRead(capteur1)==1)&&(digitalRead(capteur1)==1)){
      analogWrite(enb,200);}
      Serial.println("gauche");
      
      
    }
    else if (DATA=='B' ){
      digitalWrite(in1,LOW);
      digitalWrite(in2,HIGH);
      if((digitalRead(capteur1)==1)&&(digitalRead(capteur1)==1)){
      analogWrite(enb,200);}
      Serial.println("gauche");
      
      
    }
     else if (DATA=='y'){

      analogWrite(enb,0);
      Serial.println("gauche");
      
      
    }
     else if (DATA=='b'){

      analogWrite(enb,0);
      Serial.println("gauche");
      
      
    }
    
      
    
    
    else if (DATA=='R'){
      Serial.println("rouge");
      digitalWrite(broche,1);
      Serial.println("1");
      delay(300);
      digitalWrite(broche,0);
    }
  }
}
  
